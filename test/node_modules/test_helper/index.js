require("./bootstrap");
require("./global");
require("./superdupertest");
require("./session");
require("./shared_behavior");


global.testSignin = function (user, done) {
  var sessionHelper = new SessionHelperService();
  var fakeAuth = stub(sessionHelper, "setSession");
      fakeAuth.yields(null, user);

  function callback(err, success) {
    fakeAuth.restore();
    done(err, success);
  }

  //-- request must be an instance of "supertest-session"
  request ? request.post("/login")
    .send({username: "test", password: "test"})
    .end(function(err, res) {
        if (err) {
          callback(err, false);
        } else {
         console.log();
         console.log("test");
         done();
     }
    }) : callback(true, false);
}